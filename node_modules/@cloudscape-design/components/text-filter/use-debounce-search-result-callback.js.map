{"version":3,"file":"use-debounce-search-result-callback.js","sourceRoot":"","sources":["../../../src/text-filter/use-debounce-search-result-callback.ts"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AACtC,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAE1C,OAAO,EAAE,mBAAmB,EAAE,MAAM,yCAAyC,CAAC;AAS9E,mEAAmE;AACnE,MAAM,iBAAiB,GAAG,IAAI,CAAC;AAE/B,MAAM,CAAC,OAAO,UAAU,+BAA+B,CAAC,EACtD,WAAW,EACX,SAAS,EACT,OAAO,EACP,gBAAgB,GACe;IAC/B,MAAM,UAAU,GAAG,MAAM,CAAC,OAAO,CAAC,CAAC;IAEnC,mCAAmC;IACnC,wDAAwD;IACxD,6FAA6F;IAC7F,MAAM,wBAAwB,GAAG,mBAAmB,CAAC,GAAG,EAAE;QACxD,IAAI,CAAC,SAAS,IAAI,UAAU,CAAC,OAAO,EAAE,CAAC;YACrC,OAAO;QACT,CAAC;QACD,gBAAgB,EAAE,CAAC;IACrB,CAAC,EAAE,iBAAiB,CAAC,CAAC;IAEtB,SAAS,CAAC,GAAG,EAAE;QACb,UAAU,CAAC,OAAO,GAAG,OAAO,CAAC;QAC7B,wBAAwB,EAAE,CAAC;IAC7B,CAAC,EAAE,CAAC,WAAW,EAAE,SAAS,EAAE,OAAO,EAAE,wBAAwB,CAAC,CAAC,CAAC;AAClE,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { useEffect, useRef } from 'react';\n\nimport { useDebounceCallback } from '../internal/hooks/use-debounce-callback';\n\nexport interface DebouncedLiveAnnouncementProps {\n  searchQuery: any;\n  countText: string | undefined;\n  loading: boolean;\n  announceCallback: () => void;\n}\n\n// Debounce delay for live region (based on testing with VoiceOver)\nconst LIVE_REGION_DELAY = 2000;\n\nexport default function useDebounceSearchResultCallback({\n  searchQuery,\n  countText,\n  loading,\n  announceCallback,\n}: DebouncedLiveAnnouncementProps) {\n  const loadingRef = useRef(loading);\n\n  // announceCallback is called when:\n  // - For sync filters: on searchQuery/countText changes.\n  // - For async filters: on searchQuery/countText when loading completed and countText exists.\n  const debounceLiveAnnouncement = useDebounceCallback(() => {\n    if (!countText || loadingRef.current) {\n      return;\n    }\n    announceCallback();\n  }, LIVE_REGION_DELAY);\n\n  useEffect(() => {\n    loadingRef.current = loading;\n    debounceLiveAnnouncement();\n  }, [searchQuery, countText, loading, debounceLiveAnnouncement]);\n}\n"]}