{"version":3,"file":"index.js","sourceRoot":"","sources":["../../../../../src/internal/hooks/use-ime-composition/index.ts"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AAEtC,OAAO,EAAE,SAAS,EAAE,MAAM,EAAE,MAAM,OAAO,CAAC;AAE1C;;;;;;;;GAQG;AACH,MAAM,UAAU,iBAAiB,CAAC,UAA6C;IAC7E,MAAM,eAAe,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC;IAEtC,MAAM,sBAAsB,GAAG,GAAG,EAAE;QAClC,eAAe,CAAC,OAAO,GAAG,IAAI,CAAC;IACjC,CAAC,CAAC;IAEF,MAAM,oBAAoB,GAAG,GAAG,EAAE;QAChC,0EAA0E;QAC1E,qBAAqB,CAAC,GAAG,EAAE;YACzB,eAAe,CAAC,OAAO,GAAG,KAAK,CAAC;QAClC,CAAC,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,OAAO,GAAG,UAAU,CAAC,OAAO,CAAC;QACnC,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,OAAO;QACT,CAAC;QAED,OAAO,CAAC,gBAAgB,CAAC,kBAAkB,EAAE,sBAAsB,CAAC,CAAC;QACrE,OAAO,CAAC,gBAAgB,CAAC,gBAAgB,EAAE,oBAAoB,CAAC,CAAC;QAEjE,OAAO,GAAG,EAAE;YACV,OAAO,CAAC,mBAAmB,CAAC,kBAAkB,EAAE,sBAAsB,CAAC,CAAC;YACxE,OAAO,CAAC,mBAAmB,CAAC,gBAAgB,EAAE,oBAAoB,CAAC,CAAC;QACtE,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,UAAU,CAAC,CAAC,CAAC;IAEjB,MAAM,WAAW,GAAG,GAAG,EAAE,CAAC,eAAe,CAAC,OAAO,CAAC;IAElD,OAAO,EAAE,WAAW,EAAE,CAAC;AACzB,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport { useEffect, useRef } from 'react';\n\n/**\n * Custom hook to handle IME composition state for preventing IME race conditions when pressing enter to end composition.\n *\n * IME generates duplicate Enter events:\n * 1. First Enter: Ends composition (isComposing=true -> false)\n * 2. Second Enter: Triggers normal action (isComposing=false)\n *\n * This hook tracks composition lifecycle to prevent the second Enter during the brief window.\n */\nexport function useIMEComposition(elementRef: React.RefObject<HTMLInputElement>) {\n  const wasComposingRef = useRef(false);\n\n  const handleCompositionStart = () => {\n    wasComposingRef.current = true;\n  };\n\n  const handleCompositionEnd = () => {\n    // Keep flag true briefly to catch immediate post-composition Enter events\n    requestAnimationFrame(() => {\n      wasComposingRef.current = false;\n    });\n  };\n\n  useEffect(() => {\n    const element = elementRef.current;\n    if (!element) {\n      return;\n    }\n\n    element.addEventListener('compositionstart', handleCompositionStart);\n    element.addEventListener('compositionend', handleCompositionEnd);\n\n    return () => {\n      element.removeEventListener('compositionstart', handleCompositionStart);\n      element.removeEventListener('compositionend', handleCompositionEnd);\n    };\n  }, [elementRef]);\n\n  const isComposing = () => wasComposingRef.current;\n\n  return { isComposing };\n}\n"]}