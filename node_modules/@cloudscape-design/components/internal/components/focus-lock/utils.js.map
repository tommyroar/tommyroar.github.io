{"version":3,"file":"utils.js","sourceRoot":"","sources":["../../../../../src/internal/components/focus-lock/utils.ts"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AAEtC,aAAa;AACb,+GAA+G;AAC/G,MAAM,SAAS,GAAG;IAChB,gBAAgB;IAChB,gBAAgB;IAChB,kBAAkB;IAClB,eAAe;IAEf,SAAS;IACT,YAAY;IAEZ,SAAS;IACT,QAAQ;IACR,QAAQ;IACR,OAAO;IAEP,iBAAiB;IACjB,iBAAiB;IAEjB,YAAY;IACZ,mBAAmB;IACnB,aAAa;CACd,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;AAEZ,kEAAkE;AAClE,SAAS,SAAS,CAAC,OAAoB;IACrC,IAAI,CAAC,CAAC,iBAAiB,IAAI,OAAO,CAAC,EAAE,CAAC;QACpC,sFAAsF;QACtF,OAAO,IAAI,CAAC;IACd,CAAC;IACD,8DAA8D;IAC9D,0DAA0D;IAC1D,OAAQ,OAAe,CAAC,eAAe,CAAC,EAAE,kBAAkB,EAAE,IAAI,EAAE,CAAC,CAAC;AACxE,CAAC;AAED,0CAA0C;AAC1C,MAAM,UAAU,WAAW,CAAC,OAAoB;IAC9C,OAAO,OAAO,CAAC,OAAO,CAAC,SAAS,CAAC,IAAI,SAAS,CAAC,OAAO,CAAC,CAAC;AAC1D,CAAC;AAED,oFAAoF;AACpF,MAAM,UAAU,gBAAgB,CAAC,SAAsB;IACrD,OAAO,KAAK,CAAC,IAAI,CAAC,SAAS,CAAC,gBAAgB,CAAc,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,SAAS,CAAC,CAAC;AAC1F,CAAC;AAED,wEAAwE;AACxE,SAAS,eAAe,CAAC,SAAsB;IAC7C,OAAO,gBAAgB,CAAC,SAAS,CAAC,CAAC,MAAM,CAAC,CAAC,OAAoB,EAAE,EAAE,CAAC,OAAO,CAAC,QAAQ,KAAK,CAAC,CAAC,CAAC,CAAC;AAC/F,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAC,SAAsB;;IACtD,MAAM,SAAS,GAAG,eAAe,CAAC,SAAS,CAAC,CAAC;IAC7C,OAAO,MAAA,SAAS,CAAC,CAAC,CAAC,mCAAI,IAAI,CAAC;AAC9B,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,SAAsB;;IACrD,MAAM,SAAS,GAAG,eAAe,CAAC,SAAS,CAAC,CAAC;IAC7C,OAAO,MAAA,SAAS,CAAC,SAAS,CAAC,MAAM,GAAG,CAAC,CAAC,mCAAI,IAAI,CAAC;AACjD,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\n// Credits to\n// https://github.com/theKashey/focus-lock/blob/33f8b4bd9675d2605b15e2e4015b77fe35fbd6d0/src/utils/tabbables.ts\nconst tabbables = [\n  'button:enabled',\n  'select:enabled',\n  'textarea:enabled',\n  'input:enabled',\n\n  'a[href]',\n  'area[href]',\n\n  'summary',\n  'iframe',\n  'object',\n  'embed',\n\n  'audio[controls]',\n  'video[controls]',\n\n  '[tabindex]',\n  '[contenteditable]',\n  '[autofocus]',\n].join(',');\n\n/** Whether the element or any of its ancestors are not hidden. */\nfunction isVisible(element: HTMLElement): boolean {\n  if (!('checkVisibility' in element)) {\n    // checkVisibility isn't defined in JSDOM. It's safer to assume everything is visible.\n    return true;\n  }\n  // checkVisibility is only defined on element in Typescript 5+\n  // See https://github.com/puppeteer/puppeteer/issues/11059\n  return (element as any).checkVisibility({ visibilityProperty: true });\n}\n\n/** Whether the element can be focused. */\nexport function isFocusable(element: HTMLElement): boolean {\n  return element.matches(tabbables) && isVisible(element);\n}\n\n/** Get all elements that can be focused, either programmatically or by the user. */\nexport function getAllFocusables(container: HTMLElement): HTMLElement[] {\n  return Array.from(container.querySelectorAll<HTMLElement>(tabbables)).filter(isVisible);\n}\n\n/** Get all focusable elements that can be reached with the keyboard. */\nfunction getAllTabbables(container: HTMLElement): HTMLElement[] {\n  return getAllFocusables(container).filter((element: HTMLElement) => element.tabIndex !== -1);\n}\n\nexport function getFirstFocusable(container: HTMLElement): HTMLElement | null {\n  const tabbables = getAllTabbables(container);\n  return tabbables[0] ?? null;\n}\n\nexport function getLastFocusable(container: HTMLElement): HTMLElement | null {\n  const tabbables = getAllTabbables(container);\n  return tabbables[tabbables.length - 1] ?? null;\n}\n"]}