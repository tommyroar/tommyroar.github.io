{"version":3,"file":"internal.js","sourceRoot":"","sources":["../../../../../src/internal/do-not-use/feature-prompt/internal.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React, { useImperativeHandle, useRef, useState } from 'react';\n\nimport { Portal } from '@cloudscape-design/component-toolkit/internal';\n\nimport Arrow from '../../../popover/arrow';\nimport PopoverBody from '../../../popover/body';\nimport PopoverContainer from '../../../popover/container';\nimport { getBaseProps } from '../../base-component';\nimport ResetContextsForModal from '../../context/reset-contexts-for-modal';\nimport { fireNonCancelableEvent } from '../../events';\nimport { InternalBaseComponentProps } from '../../hooks/use-base-component';\nimport { SomeRequired } from '../../types';\nimport { FeaturePromptProps } from './interfaces';\n\nimport styles from './styles.css.js';\n\ninterface InternalFeaturePromptProps\n  extends SomeRequired<FeaturePromptProps, 'size' | 'position'>,\n    InternalBaseComponentProps {}\n\nfunction InternalFeaturePrompt(\n  {\n    onShow,\n    onDismiss,\n    header,\n    content,\n    i18nStrings,\n    size,\n    position,\n    getTrack,\n    trackKey,\n    __internalRootRef,\n    ...restProps\n  }: InternalFeaturePromptProps,\n  ref: React.Ref<FeaturePromptProps.Ref>\n) {\n  const baseProps = getBaseProps(restProps);\n  const [show, setShow] = useState(false);\n\n  const popoverBodyRef = useRef<HTMLDivElement | null>(null);\n\n  useImperativeHandle(ref, () => ({\n    dismiss: () => {\n      setShow(false);\n      fireNonCancelableEvent(onDismiss);\n    },\n    show: () => {\n      setShow(true);\n      fireNonCancelableEvent(onShow);\n    },\n  }));\n\n  return (\n    <span {...baseProps} className={styles.root} ref={__internalRootRef}>\n      {show && (\n        <Portal>\n          <ResetContextsForModal>\n            <PopoverContainer\n              size={size}\n              fixedWidth={false}\n              position={position}\n              getTrack={getTrack}\n              trackKey={trackKey}\n              variant=\"annotation\"\n              arrow={position => <Arrow position={position} variant=\"info\" />}\n              zIndex={7000}\n              renderWithPortal={true}\n            >\n              <PopoverBody\n                ref={popoverBodyRef}\n                dismissButton={true}\n                dismissAriaLabel={i18nStrings?.dismissAriaLabel}\n                header={header}\n                onDismiss={() => {\n                  setShow(false);\n                  fireNonCancelableEvent(onDismiss);\n                }}\n                variant=\"annotation\"\n                overflowVisible=\"content\"\n                onBlur={event => {\n                  const relatedTarget = event.relatedTarget;\n                  if (relatedTarget && popoverBodyRef.current?.contains(relatedTarget)) {\n                    return;\n                  }\n                  setShow(false);\n                  fireNonCancelableEvent(onDismiss);\n                }}\n              >\n                {content}\n              </PopoverBody>\n            </PopoverContainer>\n          </ResetContextsForModal>\n        </Portal>\n      )}\n    </span>\n  );\n}\n\nexport default React.forwardRef(InternalFeaturePrompt);\n"]}