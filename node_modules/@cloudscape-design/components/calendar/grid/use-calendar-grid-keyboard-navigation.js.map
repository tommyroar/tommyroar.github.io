{"version":3,"file":"use-calendar-grid-keyboard-navigation.js","sourceRoot":"","sources":["../../../../src/calendar/grid/use-calendar-grid-keyboard-navigation.ts"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AAGtC,OAAO,EAAE,WAAW,EAAE,UAAU,EAAE,MAAM,UAAU,CAAC;AAEnD,OAAO,EAAE,OAAO,EAAE,MAAM,wBAAwB,CAAC;AACjD,OAAO,SAAS,MAAM,iCAAiC,CAAC;AAExD,OAAO,EAAE,WAAW,EAAE,YAAY,EAAE,WAAW,EAAE,YAAY,EAAE,MAAM,yBAAyB,CAAC;AAC/F,OAAO,EAAE,aAAa,EAAE,WAAW,EAAE,aAAa,EAAE,aAAa,EAAE,MAAM,2BAA2B,CAAC;AAErG,MAAM,CAAC,OAAO,UAAU,iCAAiC,CAAC,EACxD,QAAQ,EACR,aAAa,EACb,WAAW,EACX,aAAa,EACb,eAAe,EACf,YAAY,EACZ,WAAW,EACX,YAAY,GAYb;IACC,MAAM,aAAa,GAAG,WAAW,KAAK,OAAO,CAAC;IAE9C,MAAM,QAAQ,GAAG,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,YAAY,CAAC;IAC9D,MAAM,QAAQ,GAAG,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,WAAW,CAAC;IAC7D,MAAM,SAAS,GAAG,aAAa,CAAC,CAAC,CAAC,aAAa,CAAC,CAAC,CAAC,WAAW,CAAC;IAC9D,MAAM,MAAM,GAAG,aAAa,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,YAAY,CAAC;IAE1D,MAAM,UAAU,GAAG,aAAa,CAAC,CAAC,CAAC,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC;IAE5D,MAAM,oBAAoB,GAAG,CAAC,KAAuC,EAAE,EAAE;QACvE,IAAI,gBAAgB,CAAC;QAErB,MAAM,IAAI,GAAG,CAAC,OAAO,CAAC,EAAE,EAAE,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,KAAK,CAAC,CAAC;QAEnG,IAAI,aAAa,KAAK,IAAI,IAAI,IAAI,CAAC,OAAO,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC;YACjE,OAAO;QACT,CAAC;QAED,KAAK,CAAC,cAAc,EAAE,CAAC;QAEvB,SAAS,CAAC,KAAK,EAAE;YACf,UAAU,EAAE,GAAG,EAAE;gBACf,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,EAAE,CAAC;oBAClC,OAAO;gBACT,CAAC;gBAED,WAAW,CAAC,IAAI,CAAC,CAAC;gBAClB,YAAY,CAAC,aAAa,CAAC,CAAC;YAC9B,CAAC;YACD,UAAU,EAAE,GAAG,EAAE,CAAC,CAAC,gBAAgB,GAAG,QAAQ,CAAC,aAAa,EAAE,eAAe,CAAC,CAAC;YAC/E,YAAY,EAAE,GAAG,EAAE,CAAC,CAAC,gBAAgB,GAAG,MAAM,CAAC,aAAa,EAAE,eAAe,CAAC,CAAC;YAC/E,aAAa,EAAE,GAAG,EAAE,CAAC,CAAC,gBAAgB,GAAG,QAAQ,CAAC,aAAa,EAAE,eAAe,CAAC,CAAC;YAClF,WAAW,EAAE,GAAG,EAAE,CAAC,CAAC,gBAAgB,GAAG,SAAS,CAAC,aAAa,EAAE,eAAe,CAAC,CAAC;SAClF,CAAC,CAAC;QAEH,IAAI,CAAC,gBAAgB,EAAE,CAAC;YACtB,OAAO;QACT,CAAC;QAED,IAAI,CAAC,UAAU,CAAC,gBAAgB,EAAE,QAAQ,CAAC,EAAE,CAAC;YAC5C,YAAY,CAAC,gBAAgB,CAAC,CAAC;QACjC,CAAC;QACD,WAAW,CAAC,gBAAgB,CAAC,CAAC;IAChC,CAAC,CAAC;IAEF,OAAO,oBAAoB,CAAC;AAC9B,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\n\nimport React from 'react';\nimport { isSameMonth, isSameYear } from 'date-fns';\n\nimport { KeyCode } from '../../internal/keycode';\nimport handleKey from '../../internal/utils/handle-key';\nimport { CalendarProps } from '../interfaces';\nimport { moveNextDay, moveNextWeek, movePrevDay, movePrevWeek } from '../utils/navigation-day';\nimport { moveMonthDown, moveMonthUp, moveNextMonth, movePrevMonth } from '../utils/navigation-month';\n\nexport default function useCalendarGridKeyboardNavigation({\n  baseDate,\n  focusableDate,\n  granularity,\n  isDateEnabled,\n  isDateFocusable,\n  onChangePage,\n  onFocusDate,\n  onSelectDate,\n}: {\n  baseDate: Date;\n  focusableDate: Date | null;\n  granularity: CalendarProps.Granularity;\n  // determines if a date could be selected by user actions\n  isDateEnabled: CalendarProps.IsDateEnabledFunction;\n  // a date could be not enabled (isDateEnabled returns false), but focusable if it's disabled with reason\n  isDateFocusable: CalendarProps.IsDateEnabledFunction;\n  onChangePage: (date: Date) => void;\n  onFocusDate: (date: null | Date) => void;\n  onSelectDate: (date: Date) => void;\n}) {\n  const isMonthPicker = granularity === 'month';\n\n  const moveDown = isMonthPicker ? moveMonthDown : moveNextWeek;\n  const moveLeft = isMonthPicker ? movePrevMonth : movePrevDay;\n  const moveRight = isMonthPicker ? moveNextMonth : moveNextDay;\n  const moveUp = isMonthPicker ? moveMonthUp : movePrevWeek;\n\n  const isSamePage = isMonthPicker ? isSameYear : isSameMonth;\n\n  const onGridKeyDownHandler = (event: React.KeyboardEvent<HTMLElement>) => {\n    let updatedFocusDate;\n\n    const keys = [KeyCode.up, KeyCode.down, KeyCode.left, KeyCode.right, KeyCode.space, KeyCode.enter];\n\n    if (focusableDate === null || keys.indexOf(event.keyCode) === -1) {\n      return;\n    }\n\n    event.preventDefault();\n\n    handleKey(event, {\n      onActivate: () => {\n        if (!isDateEnabled(focusableDate)) {\n          return;\n        }\n\n        onFocusDate(null);\n        onSelectDate(focusableDate);\n      },\n      onBlockEnd: () => (updatedFocusDate = moveDown(focusableDate, isDateFocusable)),\n      onBlockStart: () => (updatedFocusDate = moveUp(focusableDate, isDateFocusable)),\n      onInlineStart: () => (updatedFocusDate = moveLeft(focusableDate, isDateFocusable)),\n      onInlineEnd: () => (updatedFocusDate = moveRight(focusableDate, isDateFocusable)),\n    });\n\n    if (!updatedFocusDate) {\n      return;\n    }\n\n    if (!isSamePage(updatedFocusDate, baseDate)) {\n      onChangePage(updatedFocusDate);\n    }\n    onFocusDate(updatedFocusDate);\n  };\n\n  return onGridKeyDownHandler;\n}\n"]}