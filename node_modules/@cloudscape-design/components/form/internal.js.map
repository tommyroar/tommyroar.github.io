{"version":3,"file":"internal.js","sourceRoot":"","sources":["../../../src/form/internal.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React from 'react';\nimport clsx from 'clsx';\n\nimport { getAnalyticsMetadataAttribute } from '@cloudscape-design/component-toolkit/internal/analytics-metadata';\n\nimport InternalAlert from '../alert/internal';\nimport InternalBox from '../box/internal';\nimport { BuiltInErrorBoundary } from '../error-boundary/internal';\nimport { useInternalI18n } from '../i18n/context';\nimport { getBaseProps } from '../internal/base-component';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport InternalLiveRegion from '../live-region/internal';\nimport { GeneratedAnalyticsMetadataFormFragment } from './analytics-metadata/interfaces';\nimport { FormProps } from './interfaces';\n\nimport analyticsSelectors from './analytics-metadata/styles.css.js';\nimport styles from './styles.css.js';\n\ntype InternalFormProps = {\n  __injectAnalyticsComponentMetadata?: boolean;\n  __errorSlotId?: string;\n} & FormProps &\n  InternalBaseComponentProps;\n\nexport default function InternalForm({\n  children,\n  header,\n  errorText,\n  errorIconAriaLabel: errorIconAriaLabelOverride,\n  actions,\n  secondaryActions,\n  __internalRootRef,\n  __injectAnalyticsComponentMetadata,\n  __errorSlotId,\n  ...props\n}: InternalFormProps) {\n  const baseProps = getBaseProps(props);\n  const i18n = useInternalI18n('form');\n  const errorIconAriaLabel = i18n('errorIconAriaLabel', errorIconAriaLabelOverride);\n  const analyticsComponentMetadata: GeneratedAnalyticsMetadataFormFragment = {\n    component: {\n      name: 'awsui.Form',\n      label: {\n        selector: ['h1', 'h2', 'h3'].map(heading => `.${analyticsSelectors.header} ${heading}`),\n      },\n    },\n  };\n\n  return (\n    // We suppress nested error boundaries so that if there is an unexpected error inside the form - the entire form\n    // will be replaced with a fallback message. That is to ensure that no part of the form can crash without the user\n    // noticing that, as then a part of the form data might not get submitted.\n    <BuiltInErrorBoundary suppressNested={true}>\n      <div\n        {...baseProps}\n        ref={__internalRootRef}\n        className={clsx(styles.root, analyticsSelectors.root, baseProps.className)}\n        {...(__injectAnalyticsComponentMetadata ? getAnalyticsMetadataAttribute(analyticsComponentMetadata) : {})}\n      >\n        {header && <div className={clsx(styles.header, analyticsSelectors.header)}>{header}</div>}\n        {children && <div className={styles.content}>{children}</div>}\n        {errorText && (\n          <InternalBox margin={{ top: 'l' }}>\n            <InternalAlert type=\"error\" statusIconAriaLabel={errorIconAriaLabel}>\n              <div className={styles.error} id={__errorSlotId}>\n                {errorText}\n              </div>\n            </InternalAlert>\n          </InternalBox>\n        )}\n        {(actions || secondaryActions) && (\n          <div className={styles.footer}>\n            <div className={styles['actions-section']}>\n              {actions && <div className={styles.actions}>{actions}</div>}\n              {secondaryActions && <div className={styles['secondary-actions']}>{secondaryActions}</div>}\n            </div>\n          </div>\n        )}\n        {errorText && (\n          <InternalLiveRegion hidden={true} tagName=\"span\" assertive={true}>\n            {errorIconAriaLabel}, {errorText}\n          </InternalLiveRegion>\n        )}\n      </div>\n    </BuiltInErrorBoundary>\n  );\n}\n"]}