{"version":3,"file":"internal.js","sourceRoot":"","sources":["../../../src/list/internal.tsx"],"names":[],"mappings":"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","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { ReactNode } from 'react';\nimport clsx from 'clsx';\n\nimport { useInternalI18n } from '../i18n/context';\nimport { getBaseProps } from '../internal/base-component';\nimport InternalDragHandle from '../internal/components/drag-handle';\nimport SortableArea from '../internal/components/sortable-area';\nimport {\n  formatDndItemCommitted,\n  formatDndItemReordered,\n  formatDndStarted,\n} from '../internal/components/sortable-area/use-live-announcements';\nimport InternalStructuredItem, { StructuredItemProps } from '../internal/components/structured-item';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport { ListProps } from './interfaces';\n\nimport styles from './styles.css.js';\nimport testClasses from './test-classes/styles.css.js';\n\ntype InternalListProps<T = any> = InternalBaseComponentProps & ListProps<T>;\n\nconst extractValidStructuredItemProps = ({ content, secondaryContent, icon, actions }: StructuredItemProps) => ({\n  content,\n  secondaryContent,\n  icon,\n  actions,\n});\n\nexport default function InternalList<T = any>({\n  items,\n  renderItem,\n  sortable = false,\n  sortDisabled = false,\n  tagOverride: Tag = sortable ? 'ol' : 'ul',\n  ariaLabel,\n  ariaLabelledby,\n  ariaDescribedby,\n  onSortingChange,\n  i18nStrings,\n  disablePaddings,\n  disableItemPaddings,\n  __internalRootRef,\n  ...rest\n}: InternalListProps<T>) {\n  const baseProps = getBaseProps(rest);\n  const i18n = useInternalI18n('list');\n\n  let contents: ReactNode;\n  if (sortable) {\n    contents = (\n      <SortableArea\n        items={items}\n        disableReorder={sortDisabled}\n        itemDefinition={{\n          id: item => renderItem(item).id,\n          label: item => {\n            const details = renderItem(item);\n            return details.announcementLabel ?? (details.content as string);\n          },\n        }}\n        onItemsChange={event => fireNonCancelableEvent(onSortingChange, { items: event.detail.items })}\n        i18nStrings={{\n          liveAnnouncementDndStarted: i18n(\n            'liveAnnouncementDndStarted',\n            i18nStrings?.liveAnnouncementDndStarted,\n            formatDndStarted\n          ),\n          liveAnnouncementDndItemReordered: i18n(\n            'liveAnnouncementDndItemReordered',\n            i18nStrings?.liveAnnouncementDndItemReordered,\n            formatDndItemReordered\n          ),\n          liveAnnouncementDndItemCommitted: i18n(\n            'liveAnnouncementDndItemCommitted',\n            i18nStrings?.liveAnnouncementDndItemCommitted,\n            formatDndItemCommitted\n          ),\n          liveAnnouncementDndDiscarded: i18n('liveAnnouncementDndDiscarded', i18nStrings?.liveAnnouncementDndDiscarded),\n          dragHandleAriaLabel: i18n('dragHandleAriaLabel', i18nStrings?.dragHandleAriaLabel),\n          dragHandleAriaDescription: i18n('dragHandleAriaDescription', i18nStrings?.dragHandleAriaDescription),\n        }}\n        renderItem={({ ref, item, id, style, className, dragHandleProps, isDragGhost }) => {\n          const structuredItemProps = extractValidStructuredItemProps(renderItem(item));\n\n          const itemClass = clsx(\n            styles.item,\n            testClasses.item,\n            disableItemPaddings && styles['disable-item-paddings'],\n            styles['sortable-item'],\n            className\n          );\n\n          const content = (\n            <>\n              <InternalDragHandle {...dragHandleProps} />\n              <InternalStructuredItem {...structuredItemProps} disablePaddings={disableItemPaddings} />\n            </>\n          );\n\n          if (isDragGhost) {\n            return <div className={itemClass}>{content}</div>;\n          }\n\n          return (\n            <li ref={ref} className={itemClass} style={style} data-testid={id}>\n              {content}\n            </li>\n          );\n        }}\n      />\n    );\n  } else {\n    contents = items?.map(item => {\n      const { id, ...structuredItemProps } = renderItem(item);\n      return (\n        <li\n          key={id}\n          data-testid={id}\n          className={clsx(\n            styles.item,\n            testClasses.item,\n            disablePaddings && styles['disable-paddings'],\n            disableItemPaddings && styles['disable-item-paddings']\n          )}\n        >\n          <InternalStructuredItem\n            {...extractValidStructuredItemProps(structuredItemProps)}\n            disablePaddings={disableItemPaddings}\n          />\n        </li>\n      );\n    });\n  }\n\n  return (\n    <Tag\n      ref={__internalRootRef}\n      {...baseProps}\n      className={clsx(baseProps.className, styles.root, testClasses.root)}\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledby}\n      aria-describedby={ariaDescribedby}\n    >\n      {contents}\n    </Tag>\n  );\n}\n"]}