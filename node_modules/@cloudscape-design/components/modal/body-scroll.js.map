{"version":3,"file":"body-scroll.js","sourceRoot":"","sources":["../../../src/modal/body-scroll.ts"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AACtC,OAAO,EAAE,oBAAoB,EAAE,MAAM,0CAA0C,CAAC;AAEhF,OAAO,MAAM,MAAM,iBAAiB,CAAC;AAErC,qDAAqD;AACrD,EAAE;AACF,mIAAmI;AACnI,oHAAoH;AACpH,kHAAkH;AAElH,IAAI,4BAA4B,GAAuB,SAAS,CAAC;AAEjE,MAAM,UAAU,oBAAoB;IAClC,uBAAuB,EAAE,CAAC;IAC1B,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;AACpD,CAAC;AAED,MAAM,UAAU,mBAAmB;IACjC,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC;IACrD,2BAA2B,EAAE,CAAC;AAChC,CAAC;AAED,SAAS,uBAAuB;IAC9B,IAAI,gBAAgB,EAAE,EAAE,CAAC;QACvB,4BAA4B,GAAG,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,CAAC;QAChE,MAAM,uBAAuB,GAAG,8BAA8B,EAAE,CAAC;QACjE,MAAM,cAAc,GAAG,oBAAoB,EAAE,CAAC,KAAK,CAAC;QACpD,MAAM,mBAAmB,GAAG,uBAAuB,GAAG,cAAc,CAAC;QACrE,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,mBAAmB,GAAG,IAAI,CAAC;IAChE,CAAC;AACH,CAAC;AAED,SAAS,8BAA8B;IACrC,OAAO,QAAQ,CAAC,MAAM,CAAC,gBAAgB,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,YAAY,EAAE,EAAE,CAAC,CAAC;AAC3E,CAAC;AAED,SAAS,2BAA2B;IAClC,IAAI,4BAA4B,EAAE,CAAC;QACjC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,CAAC,eAAe,EAAE,4BAA4B,CAAC,CAAC;IACjF,CAAC;SAAM,CAAC;QACN,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,cAAc,CAAC,eAAe,CAAC,CAAC;IACtD,CAAC;IACD,4BAA4B,GAAG,SAAS,CAAC;AAC3C,CAAC;AAED,SAAS,gBAAgB;IACvB,4FAA4F;IAC5F,gGAAgG;IAChG,YAAY;IACZ,OAAO,QAAQ,CAAC,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,UAAU,CAAC;AACvD,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport { browserScrollbarSize } from '../internal/utils/browser-scrollbar-size';\n\nimport styles from './styles.css.js';\n\n// Read this before making changes to the code below.\n//\n// When a modal is used from an iframe the body scrolling utils take no effect because they need to be applied to another document.\n// The customers replicate this behavior by running the same code on the correct document instance, see AWSUI-41915.\n// Hence, we should avoid making changes to the component that break the body scrolling logic in its current form.\n\nlet initialBodyPaddingRightStyle: string | undefined = undefined;\n\nexport function disableBodyScrolling() {\n  setBodyScrollbarPadding();\n  document.body.classList.add(styles['modal-open']);\n}\n\nexport function enableBodyScrolling() {\n  document.body.classList.remove(styles['modal-open']);\n  restoreBodyScrollbarPadding();\n}\n\nfunction setBodyScrollbarPadding() {\n  if (bodyHasScrollbar()) {\n    initialBodyPaddingRightStyle = document.body.style.paddingRight;\n    const initialBodyPaddingRight = computedBodyPaddingRightPixels();\n    const scrollbarWidth = browserScrollbarSize().width;\n    const newBodyPaddingRight = initialBodyPaddingRight + scrollbarWidth;\n    document.body.style.paddingRight = newBodyPaddingRight + 'px';\n  }\n}\n\nfunction computedBodyPaddingRightPixels() {\n  return parseInt(window.getComputedStyle(document.body).paddingRight, 10);\n}\n\nfunction restoreBodyScrollbarPadding() {\n  if (initialBodyPaddingRightStyle) {\n    document.body.style.setProperty('padding-right', initialBodyPaddingRightStyle);\n  } else {\n    document.body.style.removeProperty('padding-right');\n  }\n  initialBodyPaddingRightStyle = undefined;\n}\n\nfunction bodyHasScrollbar() {\n  // Unfortunately this difference doesn't appear to match the scrollbar width during testing,\n  // otherwise we could remove browserScrollbarSize().  Bootstrap also doesn't use this difference\n  // directly.\n  return document.body.clientWidth < window.innerWidth;\n}\n"]}