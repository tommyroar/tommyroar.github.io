{"version":3,"file":"internal.js","sourceRoot":"","sources":["../../../src/tooltip/internal.tsx"],"names":[],"mappings":"AAAA,qEAAqE;AACrE,sCAAsC;AACtC,OAAO,KAAK,EAAE,EAAE,SAAS,EAAE,MAAM,OAAO,CAAC;AACzC,OAAO,IAAI,MAAM,MAAM,CAAC;AAExB,OAAO,EAAE,MAAM,EAAE,MAAM,+CAA+C,CAAC;AAEvE,OAAO,EAAE,YAAY,EAAE,MAAM,4BAA4B,CAAC;AAC1D,OAAO,EAAE,UAAU,EAAE,MAAM,mCAAmC,CAAC;AAC/D,OAAO,EAAE,sBAAsB,EAAE,MAAM,oBAAoB,CAAC;AAE5D,OAAO,YAAY,MAAM,kBAAkB,CAAC;AAC5C,OAAO,WAAW,MAAM,iBAAiB,CAAC;AAC1C,OAAO,gBAAgB,MAAM,sBAAsB,CAAC;AAGpD,OAAO,cAAc,MAAM,8BAA8B,CAAC;AAI1D,MAAM,CAAC,OAAO,UAAU,eAAe,CAAC,EACtC,OAAO,EACP,QAAQ,EACR,SAAS,EACT,QAAQ,GAAG,KAAK,EAChB,QAAQ,EACR,iBAAiB,EACjB,GAAG,SAAS,EACkB;IAC9B,MAAM,SAAS,GAAG,YAAY,CAAC,SAAS,CAAC,CAAC;IAC1C,MAAM,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAkC,IAAI,CAAC,CAAC;IAErE,kDAAkD;IAClD,KAAK,CAAC,SAAS,CAAC,GAAG,EAAE;QACnB,MAAM,OAAO,GAAG,QAAQ,EAAE,CAAC;QAC3B,QAAQ,CAAC,OAAO,GAAG,OAAO,CAAC;IAC7B,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;IAEf,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,UAAU,GAAG,IAAI,eAAe,EAAE,CAAC;QACzC,MAAM,CAAC,gBAAgB,CACrB,SAAS,EACT,CAAC,KAAoB,EAAE,EAAE;YACvB,IAAI,KAAK,CAAC,GAAG,KAAK,QAAQ,EAAE,CAAC;gBAC3B,qEAAqE;gBACrE,KAAK,CAAC,eAAe,EAAE,CAAC;gBACxB,sBAAsB,CAAC,QAAQ,CAAC,CAAC;YACnC,CAAC;QACH,CAAC,EACD;YACE,yEAAyE;YACzE,yEAAyE;YACzE,oEAAoE;YACpE,OAAO,EAAE,IAAI;YACb,MAAM,EAAE,UAAU,CAAC,MAAM;SAC1B,CACF,CAAC;QACF,OAAO,GAAG,EAAE;YACV,UAAU,CAAC,KAAK,EAAE,CAAC;QACrB,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC,CAAC;IAEf,OAAO,CACL,oBAAC,MAAM;QACL,gCACM,SAAS,EACb,SAAS,EAAE,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,SAAS,CAAC,SAAS,CAAC,EACzD,GAAG,EAAE,iBAAiB,EACtB,IAAI,EAAC,SAAS;YAEd,oBAAC,UAAU,IAAC,EAAE,EAAE,IAAI,IACjB,GAAG,EAAE,CAAC,CACL,oBAAC,gBAAgB,IACf,QAAQ,EAAE,QAAQ,EAClB,IAAI,EAAC,QAAQ,EACb,UAAU,EAAE,KAAK,EACjB,QAAQ,EAAE,QAAQ,EAClB,MAAM,EAAE,IAAI,EACZ,KAAK,EAAE,QAAQ,CAAC,EAAE,CAAC,oBAAC,YAAY,IAAC,QAAQ,EAAE,QAAQ,GAAI,EACvD,gBAAgB,EAAE,IAAI,EACtB,SAAS,EAAE,SAAS;gBAEpB,oBAAC,WAAW,IAAC,aAAa,EAAE,KAAK,EAAE,gBAAgB,EAAE,SAAS,EAAE,SAAS,EAAE,SAAS,EAAE,MAAM,EAAE,SAAS,IACpG,OAAO,CACI,CACG,CACpB,CACU,CACT,CACC,CACV,CAAC;AACJ,CAAC","sourcesContent":["// Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.\n// SPDX-License-Identifier: Apache-2.0\nimport React, { useEffect } from 'react';\nimport clsx from 'clsx';\n\nimport { Portal } from '@cloudscape-design/component-toolkit/internal';\n\nimport { getBaseProps } from '../internal/base-component';\nimport { Transition } from '../internal/components/transition';\nimport { fireNonCancelableEvent } from '../internal/events';\nimport { InternalBaseComponentProps } from '../internal/hooks/use-base-component';\nimport PopoverArrow from '../popover/arrow';\nimport PopoverBody from '../popover/body';\nimport PopoverContainer from '../popover/container';\nimport { InternalTooltipProps } from './interfaces';\n\nimport testUtilStyles from './test-classes/styles.css.js';\n\ntype InternalTooltipComponentProps = InternalTooltipProps & InternalBaseComponentProps;\n\nexport default function InternalTooltip({\n  content,\n  getTrack,\n  className,\n  position = 'top',\n  onEscape,\n  __internalRootRef,\n  ...restProps\n}: InternalTooltipComponentProps) {\n  const baseProps = getBaseProps(restProps);\n  const trackRef = React.useRef<HTMLElement | SVGElement | null>(null);\n\n  // Update the ref with the current tracked element\n  React.useEffect(() => {\n    const element = getTrack();\n    trackRef.current = element;\n  }, [getTrack]);\n\n  useEffect(() => {\n    const controller = new AbortController();\n    window.addEventListener(\n      'keydown',\n      (event: KeyboardEvent) => {\n        if (event.key === 'Escape') {\n          // Prevent any surrounding modals or dialogs from acting on this Esc.\n          event.stopPropagation();\n          fireNonCancelableEvent(onEscape);\n        }\n      },\n      {\n        // The tooltip is often activated on mouseover, which means the focus can\n        // be anywhere else on the page. Capture also means that this gets called\n        // before any wrapper modals or dialogs can detect it and act on it.\n        capture: true,\n        signal: controller.signal,\n      }\n    );\n    return () => {\n      controller.abort();\n    };\n  }, [onEscape]);\n\n  return (\n    <Portal>\n      <div\n        {...baseProps}\n        className={clsx(testUtilStyles.root, baseProps.className)}\n        ref={__internalRootRef}\n        role=\"tooltip\"\n      >\n        <Transition in={true}>\n          {() => (\n            <PopoverContainer\n              getTrack={getTrack}\n              size=\"medium\"\n              fixedWidth={false}\n              position={position}\n              zIndex={7000}\n              arrow={position => <PopoverArrow position={position} />}\n              hideOnOverscroll={true}\n              className={className}\n            >\n              <PopoverBody dismissButton={false} dismissAriaLabel={undefined} onDismiss={undefined} header={undefined}>\n                {content}\n              </PopoverBody>\n            </PopoverContainer>\n          )}\n        </Transition>\n      </div>\n    </Portal>\n  );\n}\n"]}